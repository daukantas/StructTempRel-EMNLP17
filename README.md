# Prerequisites
- Have [maven](https://maven.apache.org/install.html) installed in your system
- Have [Gurobi6.5.2](http://www.gurobi.com/downloads/gurobi-optimizer) installed in your system and have env var `GUROBI_HOME` setup in your path. Please contact the author (qning2@illinois.edu) if you cannot find the package for version 6.5.2
- Run `sh scripts/mvn_install.sh` in your terminal to install the jar dependencies

# Reproduce EMNLP Results
- `sh scripts/emnlp17_table4_line6.sh` to generate the numbers on line 6, table 4.
  - The numbers on line 6 can be found at the end of `logs/evaluation_process_0.6_1.4_1.txt`.
    ```
    === Temporal Awareness Score ===
    Temporal Score	F1	P	R
	40.2624	35.5236	46.4602	
    Overall Temporal Awareness Score (F1 score): 40.2624
    ```
  - The resulting .tml files can be found in `output/pred_0.6_1.4_1/`. The numbers above were generated by comparing these .tml files to the gold .tml files in `data/TempEval3/Evaluation/te3-platinum/` using the TempEval-3 official evaluation script.
- `sh scripts/emnlp17_table4_line13.sh` to generate the numbers on line 13, table 4.
  - The numbers on line 13 can be found at the end of `logs/evaluation_process_chambers_codl_tdtest_0.3_1.4_1.txt`.
    ```
    === Temporal Awareness Score ===
    Temporal Score	F1	P	R
    48.5253	45.567	51.8944	
    Overall Temporal Awareness Score (F1 score): 48.5253
    ```
  - The resulting .tml files can be found in `output/Chambers/codl/TD-Test/0.3_1.4_1/`. The numbers above were generated by comparing these .tml files to the gold .tml files in `output/Chambers/gold/` using the TempEval-3 official evaluation script.
- We have included the official evaluation script and some wrapper functions in the repo. For example, to get the numbers on line 6, you can run in terminal
  ```
  sh scripts/evaluate_test.sh 0.6_1.4_1
  ```
  To get the numbers in line 13, you can run
  ```
  sh scripts/evaluate_general.sh ./output/Chambers/gold ./output/Chambers/codl/TD-Test/0.3_1.4_1/ chambers_codl_tdtest_0.3_1.4_1
  ```
  These two commands will simply evaluate the .tml files, while the emnlp17_table#_line#.sh will generate the .tml files first.
# Citation
Qiang Ning, Zhili Feng, Dan Roth, "A structured learning approach to temporal relation extraction", EMNLP 2017 ([pdf](http://cogcomp.org/papers/NingFeRo17.pdf))

```
@inproceedings{NingFeRo17,
    author = {Qiang Ning and Zhili Feng and Dan Roth},
    title = {A Structured Learning Approach to Temporal Relation Extraction},
    booktitle = {EMNLP},
    month = {9},
    year = {2017},
    address = {Copenhagen, Denmark},
    url = "http://cogcomp.org/papers/NingFeRo17.pdf",
    funding = {AI2, IBM-ILLINOIS C3SR, DARPA, ARL},
}
```
